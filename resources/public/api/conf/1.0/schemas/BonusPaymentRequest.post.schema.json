{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"type": "object",
	"properties":
	{
		"lisaTransactionID" : {"$ref": "#/definitions/IDType"},
		"lisaInvestorAccountID" : {"$ref": "#/definitions/IDType"},
		"lisaManagerReferenceNumber" : {"$ref": "#/definitions/LISAManagerReferenceNumberType"},
        "lifeEventID" : {"$ref": "#/definitions/IDType"},
		"periodStartDate" : {"$ref": "#/definitions/ISO8601-Date"},
	    "periodEndDate" : {"$ref": "#/definitions/ISO8601-Date"},


		"htbTransfer" :
		{
			"type" : "object",
			"properties":
			{
				"SubscriptionAmountInClaimPeriod" :{"type" : "number"},
			    "totalAmountToDate" :{"type" : "number"}
			}
		},

		"inboundPayments" :
		{
			"type" : "object",
			"properties":
			{
			  "newSubscriptionsInClaimPeriod" :{"type" : "number"},
			  "newSubscriptionsTaxYearToDate" :{"type" : "number"},
			  "totalSubscriptionsInClaimPeriod" :{"type" : "number"},
			  "totalSubscriptionsTaxYearToDate" :{"type" : "number"}
			},
		  "required":
		  [
			"newSubscriptionsTaxYearToDate",
			"totalSubscriptionsInClaimPeriod",
			"totalSubscriptionsTaxYearToDate"
		  ]
		},
      "bonuses" :
      {
        "type": "object",
        "properties" :
        {
          "bonusDueInClaimPeriod" :{"type" : "number"},
          "bonusDueYearToDate" :{"type" : "number"},
          "bonusPaidInTaxYearToDate" :{"type" : "number"},
          "claimReason" : {"$ref": "#/definitions/claimReasonType"}
        },
        "required":
        [
          "bonusDueInClaimPeriod" ,
          "bonusDueYearToDate",
          "claimReason"
        ]

      }

	},
	"required": [
		"lisaInvestorAccountID",
		"lisaManagerReferenceNumber",
		"periodStartDate",
		"periodEndDate",
		"inboundPayments",
        "bonuses"
    ],
	"additionalProperties": false,
	"definitions":
	{
      "ISO8601-Date": {
        "type": "string",
        "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
      },
		"IDType": {
			"type": "string",
			"pattern": "^\\d{10}$"
		},
		"LISAManagerReferenceNumberType" : {
			"type" : "string",
			"pattern": "^Z\\d{6}$"
		},
      "claimReasonType" : {
        "type" : "string",
        "enum": ["Life Event", "Regular Bonus"]
      }

	}
}
