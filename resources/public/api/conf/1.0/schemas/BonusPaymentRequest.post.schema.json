{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"type": "object",
	"properties":
	{
		"accountID" : {
		  "description": "The financial organisation’s own unique reference number for the investor’s LISA account.",
		  "$ref": "#/definitions/IDType"},
		"lisaManagerReferenceNumber" : {
          "description": "The number issued to the provider when they register with HMRC for LISA.",
          "$ref": "#/definitions/LISAManagerReferenceNumberType"},
        "lifeEventID" : {
          "description": "The reference number you get when you report a life event.",
          "$ref": "#/definitions/IDType"},
		"periodStartDate" : {
          "description": "The first date in the claim period.",
          "$ref": "#/definitions/ISO8601-Date"},
	    "periodEndDate" : {
          "description": "The end date of the claim period.",
          "$ref": "#/definitions/ISO8601-Date"},
        "transactionType" : {
          "description": "The type of transaction.",
          "$ref": "#/definitions/transactionTypeType"},
        "chargeReason" : {
          "description": "The reason the unauthorised withdrawal charge was applied.",
          "$ref": "#/definitions/chargeReasonType"},

		"htbTransfer" :
		{
          "description": "Help-To-Buy transfer details",
			"type" : "object",
			"properties":
			{
				"htbTransferInForPeriod" :{
                  "description": "The total amount of Help to Buy funds in the account during the claim period.",
                  "type" : "number"},
			    "htbTransferTotalYTD" :{
                  "description": "The total amount of Help to Buy funds in the account in the tax year to date.",
                  "type" : "number"}
			}
		},

		"inboundPayments" :
		{
          "description": "Inbound Payments details",
			"type" : "object",
			"properties":
			{
			  "newSubsForPeriod" :{"description": "The total amount of new qualifying deposits in the account during the claim period.", "type" : "number"},
			  "newSubsYTD" :{"description": "The total amount of new qualifying deposits in the account during the tax year to date.", "type" : "number"},
			  "totalSubsForPeriod" :{"description": "The total amount in the account during the claim period that is eligible for a bonus payment.", "type" : "number"},
			  "totalSubsYTD" :{"description": "The total amount in the account during the tax year to date that is eligible for a bonus payment.", "type" : "number"}
			},
		  "required":
		  [
			"newSubsYTD",
			"totalSubsForPeriod",
			"totalSubsYTD"
		  ]
		},
      "bonuses" :
      {
        "description": "Details of Bonuses",
        "type": "object",
        "properties" :
        {
          "bonusDueForPeriod" :{"description": "The total bonus payment amount due for the claim period.", "type" : "number"},
          "totalBonusDueYTD" :{"description": "The total bonus payment amount due for the tax year to date.", "type" : "number"},
          "bonusPaidYTD" :{"description": "The total bonus payment that has already been claimed and paid in the tax year to date.", "type" : "number"},
          "claimReason" : {"description": "The reason the bonus payment was claimed.", "$ref": "#/definitions/claimReasonType"}
        },
        "required":
        [
          "bonusDueForPeriod" ,
          "totalBonusDueYTD",
          "claimReason"
        ]

      }

	},
	"required": [
		"accountID",
		"lisaManagerReferenceNumber",
		"periodStartDate",
		"periodEndDate",
        "transactionType",
        "chargeReason",
		"inboundPayments",
        "bonuses"
    ],
	"additionalProperties": false,
	"definitions":
	{
      "ISO8601-Date": {
        "type": "string",
        "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
      },
		"IDType": {
			"type": "string",
			"pattern": "^\\d{10}$"
		},
		"LISAManagerReferenceNumberType" : {
			"type" : "string",
			"pattern": "^Z\\d{6}$"
		},
      "transactionTypeType" : {
        "type" : "string",
        "enum": ["Bonus", "Penalty"]
      },
      "claimReasonType" : {
        "type" : "string",
        "enum": ["Life Event", "Regular Bonus"]
      },
      "chargeReasonType" : {
        "type" : "string",
        "enum": ["Unauthorised withdrawal", "Others TBD"]
      }


	}
}
